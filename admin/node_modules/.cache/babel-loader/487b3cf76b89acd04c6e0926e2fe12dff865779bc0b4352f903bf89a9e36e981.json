{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport CreateBlock from '@/components/Block/CreateBlock';\nimport EditBlock from '@/components/Block/EditBlock';\nimport CreateCompany from \"@/components/Company/CreateCompany\";\nimport EditCompany from '@/components/Company/EditCompany';\nimport Company from '@/api/admin/Company';\nimport CreateGroup from \"@/components/Group/CreateGroup\";\nimport mainConf, { ProjectState } from \"../../../main.conf\";\nimport YPopupWarn from \"@/components/UI/YPopupWarn.vue\";\nexport default {\n  name: \"CompanyView\",\n  components: {\n    CreateGroup,\n    CreateCompany,\n    EditCompany,\n    CreateBlock,\n    EditBlock,\n    YPopupWarn\n  },\n  data() {\n    return {\n      window: 'main',\n      companies: [],\n      companyId: null\n    };\n  },\n  created() {\n    this.$watch(() => this.$route.params, (toParams, previousParams) => {\n      if (toParams.after === '') this.window = 'main';\n    });\n    const company = new Company();\n    company.getOne().then(res => {\n      if (res.ok) {\n        res.json().then(data => data.body).then(r => this.companies = r);\n      }\n    });\n  },\n  methods: {\n    createCompany() {\n      this.$router.push('/company/create');\n      this.window = 'createCompany';\n    },\n    getCompanies() {\n      this.window = 'main';\n      this.$router.push('/company');\n      const company = new Company();\n      company.getOne().then(res => {\n        if (res.ok) {\n          res.json().then(data => data.body).then(r => this.companies = r);\n        }\n      });\n    },\n    editCompany(n) {\n      if (mainConf.projectState === ProjectState.dev) console.log(n);\n      this.companyId = n.id;\n      this.$router.push('/company/edit');\n      this.window = 'editCompany';\n    }\n  }\n};","map":{"version":3,"mappings":";AAsCA,OAAOA,WAAU,MAAO,gCAAgC;AACxD,OAAOC,SAAQ,MAAO,8BAA8B;AACpD,OAAOC,aAAY,MAAO,oCAAoC;AAC9D,OAAOC,WAAU,MAAO,kCAAkC;AAC1D,OAAOC,OAAM,MAAO,qBAAqB;AACzC,OAAOC,WAAU,MAAO,gCAAgC;AACxD,OAAOC,QAAQ,IAAGC,YAAY,QAAO,oBAAoB;AACzD,OAAOC,UAAS,MAAO,gCAAgC;AAEvD,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,UAAU,EAAE;IACVL,WAAW;IACXH,aAAa;IAAEC,WAAW;IAC1BH,WAAW;IAAEC,SAAS;IAAEO;EAC1B,CAAC;EACDG,IAAI,GAAG;IACL,OAAO;MACLC,MAAM,EAAE,MAAM;MACdC,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE;IACb;EACF,CAAC;EACDC,OAAO,GAAG;IACR,IAAI,CAACC,MAAM,CACP,MAAM,IAAI,CAACC,MAAM,CAACC,MAAM,EACxB,CAACC,QAAQ,EAAEC,cAAc,KAAK;MAC5B,IAAID,QAAQ,CAACE,KAAI,KAAM,EAAE,EACvB,IAAI,CAACT,MAAK,GAAI,MAAK;IACvB,EACJ;IACA,MAAMU,OAAM,GAAI,IAAIlB,OAAO,EAAC;IAC5BkB,OAAO,CAACC,MAAM,EAAC,CACZC,IAAI,CAACC,GAAE,IAAK;MACX,IAAIA,GAAG,CAACC,EAAE,EAAE;QACVD,GAAG,CAACE,IAAI,EAAE,CAACH,IAAI,CAACb,IAAG,IAAKA,IAAI,CAACiB,IAAI,CAAC,CAACJ,IAAI,CAACK,KAAK,IAAI,CAAChB,SAAQ,GAAIgB,CAAC;MACjE;IACF,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACPC,aAAa,GAAG;MACd,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,iBAAiB,CAAC;MACpC,IAAI,CAACrB,MAAK,GAAI,eAAc;IAC9B,CAAC;IACDsB,YAAY,GAAG;MACb,IAAI,CAACtB,MAAK,GAAI,MAAK;MACnB,IAAI,CAACoB,OAAO,CAACC,IAAI,CAAC,UAAU;MAC5B,MAAMX,OAAM,GAAI,IAAIlB,OAAO,EAAC;MAC5BkB,OAAO,CAACC,MAAM,EAAC,CACZC,IAAI,CAACC,GAAE,IAAK;QACX,IAAIA,GAAG,CAACC,EAAE,EAAE;UACVD,GAAG,CAACE,IAAI,EAAE,CAACH,IAAI,CAACb,IAAG,IAAKA,IAAI,CAACiB,IAAI,CAAC,CAACJ,IAAI,CAACK,KAAK,IAAI,CAAChB,SAAQ,GAAIgB,CAAC;QACjE;MACF,CAAC;IACL,CAAC;IACDM,WAAW,CAACC,CAAC,EAAE;MACb,IAAI9B,QAAQ,CAAC+B,YAAW,KAAM9B,YAAY,CAAC+B,GAAG,EAC5CC,OAAO,CAACC,GAAG,CAACJ,CAAC;MACf,IAAI,CAACtB,SAAQ,GAAIsB,CAAC,CAACK,EAAC;MACpB,IAAI,CAACT,OAAO,CAACC,IAAI,CAAC,eAAe,CAAC;MAClC,IAAI,CAACrB,MAAK,GAAI,aAAY;IAC5B;EACF;AACF","names":["CreateBlock","EditBlock","CreateCompany","EditCompany","Company","CreateGroup","mainConf","ProjectState","YPopupWarn","name","components","data","window","companies","companyId","created","$watch","$route","params","toParams","previousParams","after","company","getOne","then","res","ok","json","body","r","methods","createCompany","$router","push","getCompanies","editCompany","n","projectState","dev","console","log","id"],"sourceRoot":"","sources":["/home/yan/Документы/psyreply2.0_front/admin/src/views/CompanyView.vue"],"sourcesContent":["<template>\n  <y-popup-warn></y-popup-warn>\n  <div class=\"wrapper\">\n    <y-left-side-bar />\n    <main class=\"main\">\n      <y-modal v-if=\"window === 'main'\" class=\"main__modal\">\n        <header class=\"header\">\n          <div class=\"header__select\">\n            <div class=\"heading header__heading\">Компании</div>\n          </div>\n          <y-button :plus=\"true\" @click=\"createCompany\">Новая компания</y-button>\n        </header>\n        <!--        U can add \"items\" props to list component. It must be array -->\n        <y-list\n          v-if=\"companies.length > 0\"\n          :items=\"companies\"\n          key-of-name=\"name\"\n          :selectable=\"false\"\n          :editable=\"true\"\n          @edit=\"editCompany\"\n          :pagination=\"true\"\n          :page-size=\"4\"\n        />\n      </y-modal>\n      <create-company\n          v-if=\"window === 'createCompany'\"\n          @close=\"getCompanies\"\n      />\n      <edit-company\n        v-if=\"window === 'editCompany'\"\n        :companyId=\"companyId\"\n        @close=\"getCompanies\"\n      />\n    </main>\n  </div>\n</template>\n\n<script>\nimport CreateBlock from '@/components/Block/CreateBlock';\nimport EditBlock from '@/components/Block/EditBlock';\nimport CreateCompany from \"@/components/Company/CreateCompany\";\nimport EditCompany from '@/components/Company/EditCompany';\nimport Company from '@/api/admin/Company';\nimport CreateGroup from \"@/components/Group/CreateGroup\";\nimport mainConf, {ProjectState} from \"../../../main.conf\";\nimport YPopupWarn from \"@/components/UI/YPopupWarn.vue\";\n\nexport default {\n  name: \"CompanyView\",\n  components: {\n    CreateGroup,\n    CreateCompany, EditCompany,\n    CreateBlock, EditBlock, YPopupWarn\n  },\n  data() {\n    return {\n      window: 'main',\n      companies: [],\n      companyId: null\n    }\n  },\n  created() {\n    this.$watch(\n        () => this.$route.params,\n        (toParams, previousParams) => {\n          if (toParams.after === '')\n            this.window = 'main'\n        }\n    )\n    const company = new Company()\n    company.getOne()\n      .then(res => {\n        if (res.ok) {\n          res.json().then(data => data.body).then(r => this.companies = r)\n        }\n      })\n  },\n  methods: {\n    createCompany() {\n      this.$router.push('/company/create');\n      this.window = 'createCompany'\n    },\n    getCompanies() {\n      this.window = 'main'\n      this.$router.push('/company')\n      const company = new Company()\n      company.getOne()\n        .then(res => {\n          if (res.ok) {\n            res.json().then(data => data.body).then(r => this.companies = r)\n          }\n        })\n    },\n    editCompany(n) {\n      if (mainConf.projectState === ProjectState.dev)\n        console.log(n)\n      this.companyId = n.id\n      this.$router.push('/company/edit');\n      this.window = 'editCompany'\n    },\n  }\n}\n</script>\n\n<style scoped>\n.wrapper {\n  display: grid;\n  grid-template-columns: min-content 1fr;\n  width: 100%;\n}\n\n.main {\n  padding: 4.125rem;\n}\n.main__modal {\n  display: grid;\n  grid-gap: 2.5625rem;\n}\n\n.header {\n  display: grid;\n  grid-template-columns: auto min-content;\n}\n.header__select{\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n  justify-content: left;\n\n}\n\n\n.header__heading{\n  margin-right: 0.5rem;\n\n  font-size:2rem;\n}\n.header__arrow__button img{\n  width: 26px;\n  height: 26px;\n  margin-right: 20px;\n  cursor: pointer;\n}\n\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}