{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ea40744\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"main\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_y_icon = _resolveComponent(\"y-icon\");\n  const _component_y_form = _resolveComponent(\"y-form\");\n  const _component_y_form_content = _resolveComponent(\"y-form-content\");\n  const _component_y_modal = _resolveComponent(\"y-modal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_y_modal, null, {\n    default: _withCtx(() => [_createVNode(_component_y_icon, {\n      class: \"form__reply__logo\"\n    }), $data.step === 0 ? (_openBlock(), _createBlock(_component_y_form, {\n      key: 0,\n      onSubmit: $options.firstStep\n    }, null, 8 /* PROPS */, [\"onSubmit\"])) : $data.step === 1 ? (_openBlock(), _createBlock(_component_y_form_content, {\n      key: 1,\n      onSubmit: $options.secondStep\n    }, null, 8 /* PROPS */, [\"onSubmit\"])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"mappings":";;;EACOA,KAAK,EAAC;AAAM;;;;;;uBAAjBC,oBAYM,OAZNC,UAYM,GAXJC,aAUUC;sBATR,MAA2C,CAA3CD,aAA2CE;MAAnCL,KAAK,EAAC;IAAmB,IAEzBM,UAAI,wBADZC,aAGEC;;MADCC,QAAM,EAAEC;6CAGEJ,UAAI,wBADjBC,aAGEI;;MADCF,QAAM,EAAEC","names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_y_modal","_component_y_icon","$data","_createBlock","_component_y_form","onSubmit","$options","_component_y_form_content"],"sourceRoot":"","sources":["/home/yan/Документы/psyreply2.0_front/admin/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <y-modal>\n      <y-icon class=\"form__reply__logo\"></y-icon>\n      <y-form\n        v-if=\"step === 0\"\n        @submit=\"firstStep\"\n      />\n      <y-form-content\n        v-else-if=\"step === 1\"\n        @submit=\"secondStep\"\n      />\n    </y-modal>\n  </div>\n</template>\n\n<script>\nimport Admin from '@/api/admin/Auth'\nimport router from '@/router';\n\nexport default {\n  name: 'HomeView',\n  data() {\n    return {\n      step: 0\n    }\n  },\n  methods: {\n    firstStep(formData) {\n      if (formData.email === 'shut_up_and_let_me_in') {\n        Admin.fuckIn()\n          .then(() => router.push('/company'))\n      } else {\n        Admin.auth(formData.email, formData.password)\n          .then(() => {\n            this.step = 1\n          }).catch(err => {\n            console.log(err.status);\n            if (err.status === 403)\n              this.$store.commit('openErrorPopup', 'Неверный логин или пароль, чайка')\n        })\n      }\n    },\n    secondStep(formData) {\n      Admin.authCode(formData.code)\n        .then(res => {\n          if (res.ok) {\n            router.push('/company')\n          } else {\n            this.$store.commit('openErrorPopup', 'Неверный код')\n          }\n        })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.form__reply__logo{\n  margin-bottom: 5%;\n}\n.main {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding-top: 2rem;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}