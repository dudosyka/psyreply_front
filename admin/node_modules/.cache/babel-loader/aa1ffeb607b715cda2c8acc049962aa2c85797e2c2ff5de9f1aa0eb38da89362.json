{"ast":null,"code":"import _defineProperty from \"/home/yan/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/psyreply2.0_front/admin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport Admin from '@/api/admin/Auth';\nimport mainConf, { ProjectState } from \"../../../main.conf\";\nclass Error {\n  constructor(message, err) {\n    _defineProperty(this, \"message\", '');\n    _defineProperty(this, \"ok\", false);\n    _defineProperty(this, \"err\", null);\n    this.message = message;\n    this.err = err;\n  }\n  msg() {\n    return `Возникла непредвиденная ошибка: ${this.message}`;\n  }\n}\nexport default class Request {\n  constructor(endpoint, id) {\n    _defineProperty(this, \"host\", 'https://api.psyreply.com');\n    _defineProperty(this, \"endpoint\", null);\n    _defineProperty(this, \"id\", null);\n    this.endpoint = endpoint;\n    this.id = id;\n  }\n  execute(url, method, body, onResolve, onReject) {\n    return new Promise((resolve, reject) => {\n      const input = `${this.host}/${url}`;\n      if (mainConf.projectState === ProjectState.dev) console.log(input);\n      let init = null;\n      if (body === false) {\n        init = {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Connection': 'keep-alive',\n            'Authorization': `Bearer ${Admin.getToken()}`\n          }\n        };\n      } else {\n        init = {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Connection': 'keep-alive',\n            'Authorization': `Bearer ${Admin.getToken()}`\n          },\n          body: JSON.stringify(body)\n        };\n      }\n      fetch(input, init).then(res => {\n        if (res.ok) {\n          resolve(onResolve(res));\n        } else {\n          switch (res.status) {\n            case 400:\n              resolve(onResolve(new Error('не корректный запрос', res.json().then(data => data.body))));\n              break;\n            case 401:\n              resolve(onResolve(new Error('не авоторизован', res.json().then(data => data.body))));\n              break;\n            case 404:\n              resolve(onResolve(new Error('не найдено', res.json().then(data => data.body))));\n              break;\n            case 409:\n              resolve(onResolve(new Error('не удалось произвести транзакцию', res.json().then(data => data.body))));\n              break;\n            case 500:\n              resolve(onResolve(new Error('Сервер не отвечает. Да, всё очень плохо', res.json().then(data => data.body))));\n          }\n        }\n      }).catch(err => resolve(onReject(err)));\n    });\n  }\n  getOne(onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}`, 'GET', false, onResolve, onReject);\n  }\n  getAll(filters, onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}/all`, 'POST', filters, onResolve, onReject);\n  }\n  get(id, onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'GET', false, onResolve, onReject);\n  }\n  remove(id, onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'DELETE', false, onResolve, onReject);\n  }\n  update(id, body, onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'PATCH', body, onResolve, onReject);\n  }\n  create(id, body, onResolve = res => res, onReject = err => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'POST', body, onResolve, onReject);\n  }\n}","map":{"version":3,"names":["Admin","mainConf","ProjectState","Error","constructor","message","err","msg","Request","endpoint","id","execute","url","method","body","onResolve","onReject","Promise","resolve","reject","input","host","projectState","dev","console","log","init","headers","getToken","JSON","stringify","fetch","then","res","ok","status","json","data","catch","getOne","getAll","filters","get","remove","update","create"],"sources":["/home/yan/Документы/psyreply2.0_front/admin/src/api/index.js"],"sourcesContent":["import Admin from '@/api/admin/Auth';\nimport mainConf, {ProjectState} from \"../../../main.conf\";\n\n\nclass Error {\n  message = ''\n  ok = false\n  err = null\n\n  constructor(message, err) {\n    this.message = message\n    this.err = err\n  }\n\n  msg() {\n    return `Возникла непредвиденная ошибка: ${this.message}`\n  }\n}\n\nexport default class Request {\n  host = 'https://api.psyreply.com'\n  endpoint = null\n  id = null\n\n  constructor(endpoint, id) {\n    this.endpoint = endpoint\n    this.id = id\n  }\n\n  execute(url, method, body, onResolve, onReject) {\n    return new Promise((resolve, reject) => {\n\n      const input = `${this.host}/${url}`\n      if (mainConf.projectState === ProjectState.dev)\n        console.log(input)\n\n      let init = null\n\n      if (body === false) {\n        init = {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Connection': 'keep-alive',\n            'Authorization': `Bearer ${Admin.getToken()}`\n          },\n        }\n      } else {\n        init = {\n          method,\n          headers: {\n            'Content-Type': 'application/json',\n            'Connection': 'keep-alive',\n            'Authorization': `Bearer ${Admin.getToken()}`\n          },\n          body: JSON.stringify(body)\n        }\n      }\n\n      fetch(input, init)\n        .then(res => {\n          if (res.ok) {\n            resolve(onResolve(res))\n          } else {\n            switch (res.status) {\n              case 400: resolve(onResolve(new Error('не корректный запрос', res.json().then(data => data.body))))\n                break\n              case 401: resolve(onResolve(new Error('не авоторизован', res.json().then(data => data.body))))\n                break\n              case 404: resolve(onResolve(new Error('не найдено', res.json().then(data => data.body))))\n                break\n              case 409: resolve(onResolve(new Error('не удалось произвести транзакцию', res.json().then(data => data.body))))\n                break\n              case 500: resolve(onResolve(new Error('Сервер не отвечает. Да, всё очень плохо', res.json().then(data => data.body))))\n            }\n          }\n        })\n        .catch(err => resolve(onReject(err)))\n    });\n  }\n\n  getOne(onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}`, 'GET', false, onResolve, onReject)\n  }\n\n  getAll(filters, onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}/all`, 'POST', filters, onResolve, onReject)\n  }\n\n  get(id, onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'GET', false, onResolve, onReject)\n  }\n\n  remove(id, onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'DELETE', false, onResolve, onReject)\n  }\n\n  update(id, body, onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'PATCH', body, onResolve, onReject)\n  }\n\n  create(id, body, onResolve = (res) => res, onReject = (err) => err) {\n    return this.execute(`${this.endpoint}/${id}`, 'POST', body, onResolve, onReject)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}